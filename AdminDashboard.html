<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jowaki Electrical Services - Admin Dashboard</title>
    <link rel="stylesheet" href="AdminDashboard.css">
</head>
<body>
    <div class="admin-container">
        <nav class="sidebar">
            <div class="logo">
                <h1> JOWAKI ELECTRICAL </h1>
                <p>Admin Panel</p>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="AdminDashboard.html" class="nav-link active" data-section="dashboard">
                        <span class="nav-icon"></span>
                        Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#products" class="nav-link" data-section="products" onclick="showSection('products'); return false;">
                        <span class="nav-icon"></span>
                        Products
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#orders" class="nav-link" data-section="orders" onclick="showSection('orders'); return false;">
                        <span class="nav-icon"></span>
                        Orders
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#customers" class="nav-link" data-section="customers" onclick="showSection('customers'); return false;">
                        <span class="nav-icon"></span>
                        Customers
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#services" class="nav-link" data-section="services" onclick="showSection('services'); return false;">
                        <span class="nav-icon"></span>
                        Service Requests
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#reports" class="nav-link" data-section="reports" onclick="showSection('reports'); return false;">
                        <span class="nav-icon"></span>
                        Reports
                    </a>
                </li>
            </ul>
        </nav>

        <main class="main-content">
            <div class="header">
                <h2 id="page-title">Dashboard</h2>
                <div class="user-info">
                    <span>Welcome</span>
                    <div class="notification-bell" onclick="toggleNotifications()">
    üîî
    <span id="notification-count" class="notification-count"></span>

    <!-- Dropdown panel -->
    <div id="notification-dropdown" class="notification-dropdown">
        <div id="notifications-list"></div>
    </div>
</div>

                    <button class="btn btn-danger" onclick="logout()">Logout</button>
                </div>
            </div>

            <section id="dashboard" class="content-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="total-products">0</div>
                        <div>Total Products</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pending-orders">0</div>
                        <div>Pending Orders</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-customers">0</div>
                        <div>Total Customers</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="monthly-revenue">0</div>
                        <div>Monthly Revenue (KSh)</div>
                    </div>
                </div>

                <div style="background: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem;">
                    <h3>Quick Actions</h3>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="openModal('productModal')">Add Product</button>
                        <button class="btn btn-success" onclick="exportData('products')">Export Products</button>
                        <button class="btn btn-warning" onclick="bulkUpdatePrices()">Update Prices</button>
                        <button class="btn btn-primary" onclick="viewLowStock()">Low Stock Alert</button>
                    </div>
                </div>

                <div style="background: white; padding: 2rem; border-radius: 15px;">
                    <h3>Recent Activities</h3>
                    <div id="recent-activities">
                        <!-- Activities will be loaded here -->
                    </div>
                </div>
            </section>

            <section id="products" class="content-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                    <h3>Product Management</h3>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="openModal('productModal')">Add Product</button>
                        <button class="btn btn-success" onclick="importProducts()">Import CSV</button>
                        <button class="btn btn-warning" onclick="exportData('products')">Export</button>
                    </div>
                </div>

                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" placeholder="Search products..." oninput="searchProducts(this.value)">
                </div>

                <div style="margin-bottom: 1rem;">
                    <select class="form-control" style="width: 200px; display: inline-block;" onchange="filterProducts(this.value)">
                        <option value="">All Categories</option>
                        <option value="lighting">Lighting</option>
                        <option value="accessories">Accessories</option>
                        <option value="safety">Safety</option>
                        <option value="tools">Tools</option>
                        <option value="cables">Cables</option>
                    </select>
                </div>

                <table class="data-table" id="productsTable">
                    <thead>
                        <tr>
                            <th>Image</th>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Price (KSh)</th>
                            <th>Stock</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="products-tbody">
                        <!-- Products will be loaded here -->
                    </tbody>
                </table>
            </section>

            <section id="orders" class="content-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                    <h3>Orders Management</h3>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <select class="form-control" style="width: 200px;" onchange="filterOrders(this.value)">
                            <option value="">All Orders</option>
                            <option value="pending">Pending</option>
                            <option value="processing">Processing</option>
                            <option value="shipped">Shipped</option>
                            <option value="delivered">Delivered</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                        <button class="btn btn-primary" onclick="exportData('orders')">Export Orders</button>
                    </div>
                </div>

                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" placeholder="Search orders..." oninput="searchOrders(this.value)">
                </div>

                <table class="data-table" id="ordersTable">
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Customer</th>
                            <th>Date</th>
                            <th>Items</th>
                            <th>Amount (KSh)</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="orders-tbody">
                        <!-- Orders will be loaded here -->
                    </tbody>
                </table>
            </section>

            <section id="customers" class="content-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                    <h3>Customer Management</h3>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="exportData('customers')">Export Customers</button>
                        <button class="btn btn-success" onclick="sendNewsletter()">Send Newsletter</button>
                    </div>
                </div>

                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" placeholder="Search customers..." oninput="searchCustomers(this.value)">
                </div>

                <table class="data-table" id="customersTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>Location</th>
                            <th>Orders</th>
                            <th>Total Spent (KSh)</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="customers-tbody">
                        <!-- Customers will be loaded here -->
                    </tbody>
                </table>
            </section>

            <section id="services" class="content-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                    <h3>Service Requests</h3>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <select class="form-control" style="width: 200px;" onchange="filterServices(this.value)">
                            <option value="">All Services</option>
                            <option value="pending">Pending</option>
                            <option value="assigned">Assigned</option>
                            <option value="in-progress">In Progress</option>
                            <option value="completed">Completed</option>
                        </select>
                        <button class="btn btn-primary" onclick="assignBulkTechnician()">Bulk Assign</button>
                    </div>
                </div>

                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" placeholder="Search service requests..." oninput="searchServices(this.value)">
                </div>

                <table class="data-table" id="servicesTable">
                    <thead>
                        <tr>
                            <th>Request ID</th>
                            <th>Customer</th>
                            <th>Service Type</th>
                            <th>Date Requested</th>
                            <th>Scheduled Date</th>
                            <th>Technician</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="services-tbody">
                        <!-- Services will be loaded here -->
                    </tbody>
                </table>
            </section>

            <section id="reports" class="content-section">
                <h3>Reports & Analytics</h3>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="monthly-sales">0</div>
                        <div>Monthly Sales (KSh)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="monthly-orders">0</div>
                        <div>Orders This Month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="new-customers">0</div>
                        <div>New Customers</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="service-completion">0%</div>
                        <div>Service Completion Rate</div>
                    </div>
                </div>

                <div style="background: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem;">
                    <h4>Generate Reports</h4>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="generateReport('sales')">Sales Report</button>
                        <button class="btn btn-primary" onclick="generateReport('inventory')">Inventory Report</button>
                        <button class="btn btn-primary" onclick="generateReport('customers')">Customer Report</button>
                        <button class="btn btn-primary" onclick="generateReport('services')">Service Report</button>
                    </div>
                </div>

                <div style="background: white; padding: 2rem; border-radius: 15px;">
                    <h4>Top Performing Products</h4>
                    <table class="data-table" id="top-products">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Category</th>
                                <th>Units Sold</th>
                                <th>Revenue (KSh)</th>
                                <th>Growth</th>
                            </tr>
                        </thead>
                        <tbody id="top-products-tbody">
                            <!-- Top products will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('productModal')">√ó</span>
            <h3 id="product-modal-title">Add New Product</h3>
            <form id="productForm" onsubmit="saveProduct(event)">
                <input type="hidden" id="product-id" value="">
                
                <div class="form-group">
                    <label>Product Images</label>
                    <div class="image-upload" onclick="document.getElementById('product-images').click()">
                        <p>Click to upload images</p>
                        <input type="file" id="product-images" multiple accept="image/*" style="display: none;" onchange="handleImageUpload(this)">
                    </div>
                    <div id="image-preview" class="image-preview" style="display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;"></div>
                </div>

                <div class="form-group">
                    <label>Product Name *</label>
                    <input type="text" id="product-name" class="form-control" required>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Category *</label>
                        <select id="product-category" class="form-control" required>
                            <option value="">Select Category</option>
                            <option value="lighting">Lighting</option>
                            <option value="accessories">Accessories</option>
                            <option value="safety">Safety</option>
                            <option value="tools">Tools</option>
                            <option value="cables">Cables</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Brand</label>
                        <input type="text" id="product-brand" class="form-control">
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Price (KSh) *</label>
                        <input type="number" id="product-price" class="form-control" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>Discount Price (KSh)</label>
                        <input type="number" id="product-discount" class="form-control" min="0" step="0.01">
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Stock Quantity *</label>
                        <input type="number" id="product-stock" class="form-control" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>Low Stock Alert</label>
                        <input type="number" id="product-low-stock" class="form-control" min="0" value="10">
                    </div>
                </div>

                <div class="form-group">
                    <label>Product Description *</label>
                    <textarea id="product-description" class="form-control" rows="4" required></textarea>
                </div>

                <div class="form-group">
                    <label>Product Specifications</label>
                    <textarea id="product-specs" class="form-control" rows="3" placeholder="Enter specifications (one per line)"></textarea>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Weight (kg)</label>
                        <input type="number" id="product-weight" class="form-control" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Warranty (months)</label>
                        <input type="number" id="product-warranty" class="form-control" min="0">
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="product-featured"> Featured Product
                    </label>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="product-active" checked> Active (visible to customers)
                    </label>
                </div>

                <button type="submit" class="btn btn-primary">Save Product</button>
            </form>
        </div>
    </div>

    <div id="orderModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('orderModal')">√ó</span>
            <h3>Order Details</h3>
            <div id="order-details-content">
                <!-- Order details will be loaded here -->
            </div>
        </div>
    </div>

    <div id="serviceModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('serviceModal')">√ó</span>
            <h3>Assign Service Request</h3>
            <form id="serviceForm" onsubmit="saveService(event)">
                <input type="hidden" id="service-id" value="">
                
                <div class="form-group">
                    <label>Request ID</label>
                    <input type="text" id="service-request-id" class="form-control" readonly>
                </div>

                <div class="form-group">
                    <label>Customer Name</label>
                    <input type="text" id="service-customer" class="form-control" readonly>
                </div>

                <div class="form-group">
                    <label>Service Type</label>
                    <input type="text" id="service-type" class="form-control" readonly>
                </div>

                <div class="form-group">
                    <label>Technician *</label>
                    <select id="service-technician" class="form-control" required>
                        <option value="">Select Technician</option>
                    </select>
                    <button type="button" class="btn btn-primary" style="margin-top: 0.5rem;" onclick="addTechnicianPrompt()">Add Technician</button>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Scheduled Date *</label>
                        <input type="date" id="service-scheduled-date" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Status *</label>
                        <select id="service-status" class="form-control" required>
                            <option value="pending">Pending</option>
                            <option value="assigned">Assigned</option>
                            <option value="in-progress">In Progress</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="service-notes" class="form-control" rows="4" placeholder="Add any additional notes..."></textarea>
                </div>

                <button type="submit" class="btn btn-primary">Save Service Request</button>
            </form>
        </div>
    </div>
    


    <script src="AdminDashboard.js"></script>
</body>
</html>